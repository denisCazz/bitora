---
import Layout from '../layouts/Layout.astro';
---

<Layout 
  title="Cookie Policy - Bitora.it"
  description="Informazioni sui cookie utilizzati da Bitora.it, come vengono utilizzati e come gestire le tue preferenze sui cookie."
>
  <main class="container mx-auto px-4 py-16">
    <!-- Header -->
    <header class="text-center mb-16">
      <h1 class="text-4xl md:text-5xl font-bold mb-6 text-gray-800">Cookie Policy</h1>
      <p class="text-xl text-gray-600 max-w-3xl mx-auto">
        Informazioni sui cookie utilizzati da Bitora.it e su come gestire le tue preferenze
      </p>
      <div class="mt-8 text-sm text-gray-500">
        Ultimo aggiornamento: 11 giugno 2025
      </div>
    </header>

    <!-- Content -->
    <article class="max-w-4xl mx-auto prose prose-lg prose-gray">
      
      <!-- Introduzione -->
      <section class="mb-12">
        <h2 class="text-3xl font-bold mb-6 text-gray-800">Cosa sono i cookie</h2>
        <div class="bg-blue-50 border-l-4 border-blue-500 p-6 mb-6">
          <p class="text-gray-700 leading-relaxed mb-0">
            I cookie sono piccoli file di testo che vengono memorizzati sul tuo dispositivo quando visiti un sito web. 
            Ci aiutano a migliorare la tua esperienza di navigazione e a fornire servizi personalizzati.
          </p>
        </div>
        <p class="text-gray-700 leading-relaxed">
          Questo sito web utilizza cookie per garantire il corretto funzionamento del sito, analizzare il traffico e migliorare l'esperienza utente. 
          Puoi gestire le tue preferenze sui cookie in qualsiasi momento utilizzando le impostazioni del tuo browser o tramite il nostro pannello di controllo cookie.
        </p>
      </section>

      <!-- Tipi di cookie -->
      <section class="mb-12">
        <h2 class="text-3xl font-bold mb-6 text-gray-800">Tipi di cookie che utilizziamo</h2>
        
        <!-- Cookie Necessari -->
        <div class="bg-white border border-gray-200 rounded-lg p-6 mb-6 shadow-sm">
          <h3 class="text-xl font-semibold mb-4 text-gray-800 flex items-center">
            <div class="w-6 h-6 bg-green-100 rounded-full flex items-center justify-center mr-3">
              <svg class="w-3 h-3 text-green-600" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
              </svg>
            </div>
            Cookie Necessari
          </h3>
          <p class="text-gray-700 mb-4">
            <strong>Scopo:</strong> Questi cookie sono essenziali per il funzionamento del sito web e non possono essere disabilitati nei nostri sistemi.
          </p>
          <p class="text-gray-700 mb-4">
            <strong>Durata:</strong> Sessione o fino a 1 anno
          </p>
          <p class="text-gray-700">
            <strong>Esempi:</strong> Cookie di sessione, impostazioni di sicurezza, preferenze di accessibilità, consenso cookie.
          </p>
        </div>

        <!-- Cookie di Analisi -->
        <div class="bg-white border border-gray-200 rounded-lg p-6 mb-6 shadow-sm">
          <h3 class="text-xl font-semibold mb-4 text-gray-800 flex items-center">
            <div class="w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center mr-3">
              <svg class="w-3 h-3 text-blue-600" fill="currentColor" viewBox="0 0 20 20">
                <path d="M2 10a8 8 0 018-8v8h8a8 8 0 11-16 0z"/>
                <path d="M12 2.252A8.014 8.014 0 0117.748 8H12V2.252z"/>
              </svg>
            </div>
            Cookie di Analisi
          </h3>
          <p class="text-gray-700 mb-4">
            <strong>Scopo:</strong> Ci aiutano a capire come i visitatori interagiscono con il nostro sito web raccogliendo e riportando informazioni in forma anonima.
          </p>
          <p class="text-gray-700 mb-4">
            <strong>Durata:</strong> Fino a 2 anni
          </p>
          <p class="text-gray-700 mb-4">
            <strong>Fornitore:</strong> Umami Analytics (servizio di analisi privacy-friendly)
          </p>
          <p class="text-gray-700">
            <strong>Dati raccolti:</strong> Pagine visitate, tempo di permanenza, paese di origine, tipo di dispositivo (tutti in forma anonima).
          </p>
        </div>

        <!-- Cookie Funzionali -->
        <div class="bg-white border border-gray-200 rounded-lg p-6 mb-6 shadow-sm">
          <h3 class="text-xl font-semibold mb-4 text-gray-800 flex items-center">
            <div class="w-6 h-6 bg-purple-100 rounded-full flex items-center justify-center mr-3">
              <svg class="w-3 h-3 text-purple-600" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd"/>
              </svg>
            </div>
            Cookie Funzionali
          </h3>
          <p class="text-gray-700 mb-4">
            <strong>Scopo:</strong> Permettono al sito web di fornire funzionalità avanzate e personalizzazione.
          </p>
          <p class="text-gray-700 mb-4">
            <strong>Durata:</strong> Fino a 1 anno
          </p>
          <p class="text-gray-700">
            <strong>Esempi:</strong> Preferenze di visualizzazione, impostazioni di lingua, contenuti personalizzati.
          </p>
        </div>
      </section>

      <!-- Gestione Cookie -->
      <section class="mb-12">
        <h2 class="text-3xl font-bold mb-6 text-gray-800">Come gestire i cookie</h2>
        
        <div class="bg-gray-50 rounded-lg p-6 mb-6">
          <h3 class="text-lg font-semibold mb-4 text-gray-800">Gestione tramite il nostro sito</h3>
          <p class="text-gray-700 mb-4">
            Puoi gestire le tue preferenze sui cookie in qualsiasi momento cliccando sul pulsante qui sotto:
          </p>
          <button 
            id="open-cookie-settings" 
            class="bg-black text-white px-6 py-3 rounded-lg hover:bg-gray-800 transition-colors font-medium"
          >
            Gestisci Preferenze Cookie
          </button>
        </div>

        <div class="bg-white border border-gray-200 rounded-lg p-6 mb-6 shadow-sm">
          <h3 class="text-lg font-semibold mb-4 text-gray-800">Gestione tramite il browser</h3>
          <p class="text-gray-700 mb-4">
            Puoi anche gestire i cookie direttamente dalle impostazioni del tuo browser:
          </p>
          <ul class="space-y-2 text-gray-700">
            <li><strong>Chrome:</strong> Impostazioni > Privacy e sicurezza > Cookie e altri dati dei siti</li>
            <li><strong>Firefox:</strong> Impostazioni > Privacy e sicurezza > Cookie e dati dei siti web</li>
            <li><strong>Safari:</strong> Preferenze > Privacy > Gestisci dati siti web</li>
            <li><strong>Edge:</strong> Impostazioni > Privacy, ricerca e servizi > Cookie e autorizzazioni sito</li>
          </ul>
        </div>
      </section>

      <!-- Servizi Terzi -->
      <section class="mb-12">
        <h2 class="text-3xl font-bold mb-6 text-gray-800">Servizi di terze parti</h2>
        
        <div class="bg-white border border-gray-200 rounded-lg p-6 mb-6 shadow-sm">
          <h3 class="text-lg font-semibold mb-4 text-gray-800">Umami Analytics</h3>
          <p class="text-gray-700 mb-4">
            Utilizziamo Umami Analytics, un servizio di analisi web privacy-friendly che:
          </p>
          <ul class="space-y-2 text-gray-700 mb-4">
            <li>• Non raccoglie dati personali identificabili</li>
            <li>• Non utilizza cookie di tracciamento</li>
            <li>• Rispetta la privacy degli utenti</li>
            <li>• È conforme al GDPR</li>
          </ul>
          <p class="text-gray-700">
            <strong>Maggiori informazioni:</strong> <a href="https://umami.is/privacy" target="_blank" rel="noopener noreferrer" class="text-black hover:underline">Umami Privacy Policy</a>
          </p>
        </div>
      </section>

      <!-- Diritti dell'utente -->
      <section class="mb-12">
        <h2 class="text-3xl font-bold mb-6 text-gray-800">I tuoi diritti</h2>
        
        <div class="space-y-4 text-gray-700">
          <p><strong>Diritto di scelta:</strong> Puoi accettare o rifiutare i cookie non essenziali</p>
          <p><strong>Diritto di modifica:</strong> Puoi modificare le tue preferenze in qualsiasi momento</p>
          <p><strong>Diritto di cancellazione:</strong> Puoi eliminare i cookie dal tuo browser</p>
          <p><strong>Diritto di informazione:</strong> Puoi richiedere informazioni sui cookie utilizzati</p>
        </div>
      </section>

      <!-- Modifiche alla policy -->
      <section class="mb-12">
        <h2 class="text-3xl font-bold mb-6 text-gray-800">Modifiche a questa policy</h2>
        <p class="text-gray-700 leading-relaxed">
          Ci riserviamo il diritto di modificare questa Cookie Policy in qualsiasi momento. 
          Le modifiche entreranno in vigore immediatamente dopo la pubblicazione sul sito. 
          Ti consigliamo di controllare periodicamente questa pagina per eventuali aggiornamenti.
        </p>
      </section>

      <!-- Contatti -->
      <section class="mb-12">
        <h2 class="text-3xl font-bold mb-6 text-gray-800">Contatti</h2>
        <div class="bg-gray-50 rounded-lg p-6">
          <p class="text-gray-700 mb-4">
            Per domande o chiarimenti su questa Cookie Policy, puoi contattarci:
          </p>
          <div class="space-y-2 text-gray-700">
            <p><strong>Email:</strong> <a href="mailto:info@bitora.it" class="text-black hover:underline">info@bitora.it</a></p>
            <p><strong>Telefono:</strong> <a href="tel:+393247787644" class="text-black hover:underline">+39 324 778 7644</a></p>
            <p><strong>Modulo di contatto:</strong> <a href="/contattaci" class="text-black hover:underline">Contattaci</a></p>
          </div>
        </div>
      </section>

    </article>
  </main>
</Layout>

<script>
  // Open cookie settings from the cookie policy page
  document.addEventListener('DOMContentLoaded', () => {
    document.getElementById('open-cookie-settings')?.addEventListener('click', () => {
      // Check if cookie settings modal exists
      const modal = document.getElementById('cookie-settings-modal');
      
      if (modal) {
        // If modal exists, show it directly
        modal.classList.remove('hidden');
        document.body.style.overflow = 'hidden';
      } else {
        // Try to use the global function
        if (typeof (window as any).showCookieSettings === 'function') {
          (window as any).showCookieSettings();
        } else {
          // Dispatch custom event as fallback
          window.dispatchEvent(new CustomEvent('openCookieSettings'));
          
          // If still nothing works, show helpful message
          setTimeout(() => {
            const modalAfterEvent = document.getElementById('cookie-settings-modal');
            if (!modalAfterEvent || modalAfterEvent.classList.contains('hidden')) {
              alert('Per gestire le preferenze sui cookie, visita la homepage dove troverai il banner dei cookie con le opzioni di gestione.');
            }
          }, 200);
        }
      }
    });
  });
</script>

<style>
  /* Custom styles for the cookie policy page */
  .prose h2 {
    border-bottom: 2px solid #e5e7eb;
    padding-bottom: 0.5rem;
  }
  
  .prose h3 {
    color: #374151;
  }
  
  .prose a {
    color: #000;
    text-decoration: underline;
  }
  
  .prose a:hover {
    color: #374151;
  }
  
  .prose ul {
    list-style-type: disc;
    padding-left: 1.5rem;
  }
  
  .prose li {
    margin-bottom: 0.5rem;
  }
</style>
